let paths = {};

paths["v1"] = 
    "m 177.88158,70.89283 a 0.55466563,0.55466563 0 0 0 -0.55449,0.554489 0.55466563,0.55466563 0 0 0 0.52917,0.553454 0.55466563,0.55466563 0 0 0 0.0253,0.001 0.55466563,0.55466563 0 0 0 0.0253,-0.001 0.55466563,0.55466563 0 0 0 0.52916,-0.553454 0.55466563,0.55466563 0 0 0 -0.55449,-0.554489 z m 0.0253,1.107943 -0.004,16.535425 c 8.7e-4,-0.888013 0.004,-1.175681 0.004,-2.351278 z m -0.004,16.535425 c -0.005,5.336282 -0.0217,7.063884 -0.0217,14.128332 0,3.75371 0.0108,8.76687 0.0145,11.24118 a 0.55466563,0.55466563 0 0 0 -0.007,0 0.55466563,0.55466563 0 0 0 -0.007,0 0.55466563,0.55466563 0 0 0 -0.55449,0.55449 0.55466563,0.55466563 0 0 0 0.55449,0.555 0.55466563,0.55466563 0 0 0 0.55449,-0.555 0.55466563,0.55466563 0 0 0 -0.53847,-0.55449 z m -0.0145,25.369512 c 3.4e-4,-2.43295 -0.007,-7.44103 -0.007,-11.24118 0,-1.05221 -0.002,-1.28646 -0.003,-2.10426 z m -0.0103,-13.34544 -0.0222,-28.559497 V 86.18492 c 0,7.187827 0.0173,8.788815 0.0222,14.37535 z";

paths["v2"] = 
    "m 177.88688,67.788627 a 0.55466563,0.55466563 0 0 0 -0.55449,0.554488 0.55466563,0.55466563 0 0 0 0.54674,0.554488 l -0.009,0.807186 V 86.18492 c 0,8.240045 -0.0589,8.239573 -0.0589,16.47961 0,8.24006 0.0506,8.24009 0.0506,16.48014 0,3.22245 0.0137,3.35903 0.0227,4.23488 a 0.55466563,0.55466563 0 0 0 -0.55191,0.55449 0.55466563,0.55466563 0 0 0 0.55449,0.55449 0.55466563,0.55466563 0 0 0 0.55449,-0.55449 0.55466563,0.55466563 0 0 0 -0.52503,-0.55397 c -3.2e-4,-0.53804 -9.1e-4,-1.58842 -0.003,-2.81482 l 0.002,2.81482 a 0.55466563,0.55466563 0 0 0 -0.0248,-5.2e-4 l -0.009,-54.48143 a 0.55466563,0.55466563 0 0 0 0.002,0 l 0.0289,49.74218 c 0.002,-7.62454 0.0496,-7.9481 0.0496,-15.97577 0,-8.240045 -0.0589,-8.239564 -0.0589,-16.47961 V 69.704789 l -0.016,-0.806669 a 0.55466563,0.55466563 0 0 0 0.55397,-0.555005 0.55466563,0.55466563 0 0 0 -0.55449,-0.554488 z m 0.0258,50.851673 c -7e-5,0.20172 -0.001,0.29199 -0.001,0.50437 0,0.86841 0.001,0.92951 0.002,1.42058 z";

paths["v3"] = 
    "m 177.88727,55.916484 a 0.55466563,0.55466563 0 0 0 -0.555,0.554488 0.55466563,0.55466563 0 0 0 0.53485,0.553971 c -0.008,2.123276 -0.0222,8.59771 -0.0222,12.679846 0,8.240054 -0.47026,8.240078 -0.47026,16.480131 0,8.240054 0.29404,8.240083 0.29404,16.48013 0,8.24006 0.17753,9.37682 0.21394,14.87041 0.007,1.10813 0.009,2.7404 0.01,3.53932 a 0.55466563,0.55466563 0 0 0 -0.005,0 0.55466563,0.55466563 0 0 0 -0.555,0.55449 0.55466563,0.55466563 0 0 0 0.555,0.55449 0.55466563,0.55466563 0 0 0 0.55449,-0.55449 0.55466563,0.55466563 0 0 0 -0.49403,-0.55139 c 0.002,-0.68152 0.005,-2.10776 0.005,-3.79408 0,-8.24005 0.15245,-6.37921 0.15245,-14.61927 0,-8.240051 0.29404,-8.240073 0.29404,-16.480127 0,-8.240053 -0.47026,-8.240078 -0.47026,-16.480131 0,-4.082325 -0.003,-10.556879 -0.0114,-12.679846 a 0.55466563,0.55466563 0 0 0 0.524,-0.553454 0.55466563,0.55466563 0 0 0 -0.55449,-0.554488 z";

paths["v4"] =
    "m 177.88191,58.383516 a 0.55466563,0.55466563 0 0 0 -0.55501,0.554489 0.55466563,0.55466563 0 0 0 0.49455,0.55087 c -0.002,0.09351 -0.13281,6.127611 -0.13281,10.215914 0,8.240054 -0.0672,8.240078 -0.0672,16.480131 0,8.240054 0.15089,8.24008 0.15089,16.48013 0,8.24006 0.0672,8.24008 0.0672,16.48013 0,8.24005 0.017,8.24009 0.0336,16.48013 l 0.0171,8.34213 v -8.34213 c 0,-8.24005 0.0336,-8.24008 0.0336,-16.48013 0,-8.24005 0.0672,-8.24007 0.0672,-16.48013 0,-8.240047 0.15142,-8.240076 0.15142,-16.48013 0,-8.240053 -0.0672,-8.240077 -0.0672,-16.480131 0,-4.085364 -0.12552,-10.114278 -0.12765,-10.21643 a 0.55466563,0.55466563 0 0 0 0.48886,-0.550354 0.55466563,0.55466563 0 0 0 -0.55448,-0.554489 z m 0.008,85.583924 v 2.29908 a 0.55466563,0.55466563 0 0 0 -0.008,-5.1e-4 0.55466563,0.55466563 0 0 0 -0.55501,0.555 0.55466563,0.55466563 0 0 0 0.55501,0.55449 0.55466563,0.55466563 0 0 0 0.55449,-0.55449 0.55466563,0.55466563 0 0 0 -0.54157,-0.55449 z";

paths["v5"] = 
    "m 177.88718,58.383516 a 0.55466563,0.55466563 0 0 0 -0.555,0.554489 0.55466563,0.55466563 0 0 0 0.555,0.554488 0.55466563,0.55466563 0 0 0 0.0326,-0.001 l -0.11317,0.02791 c 0,0 -0.12092,4.807676 -0.12092,10.185425 0,8.240054 0.0419,8.240078 0.0419,16.480131 0,8.240054 0.14263,8.240082 0.14263,16.480131 0,8.24006 -0.008,8.24008 -0.008,16.48013 0,8.24005 0.0171,8.24008 0.0171,16.48013 0,7.31522 -0.007,13.41802 -0.008,14.29836 a 0.55466563,0.55466563 0 0 0 -0.53899,0.55397 0.55466563,0.55466563 0 0 0 0.55501,0.555 0.55466563,0.55466563 0 0 0 0.55448,-0.555 0.55466563,0.55466563 0 0 0 -0.53846,-0.55449 c -9.6e-4,-0.89508 -0.008,-6.98525 -0.008,-14.29784 0,-8.24005 0.0171,-8.24008 0.0171,-16.48013 0,-8.24005 -0.009,-8.24007 -0.009,-16.48013 0,-8.240048 0.14314,-8.240077 0.14314,-16.480131 0,-8.240053 0.0419,-8.240077 0.0419,-16.480131 0,-5.395714 -0.12167,-10.206699 -0.12196,-10.217981 a 0.55466563,0.55466563 0 0 0 0.47491,-0.548803 0.55466563,0.55466563 0 0 0 -0.55449,-0.554489 z";

let animation = document.getElementById("v1");

animation.setAttribute("d",paths["v1"]);

let stages = ["v1", "v2", "v3", "v4", "v5"];

// basic animation

async function animate (last, counter) {
    console.log(counter);
    if(counter === 5) {
        return;
    }
    let next = (last +1) % 5;
    let interpolator = flubber.interpolate(
        paths[stages[last]], 
        paths[stages[next]]
    );
    for (let i = 0; i <= 1.1; i+= 0.02) {
        await sleep(10);
        animation.setAttribute("d",interpolator(i));
    }
    animate(next, ++counter)
}

function sleep (time) {
    return new Promise ((resolve, reject) => {
        setTimeout(() => {
            resolve(true);
        }, time);
    });
}

let btn = document.createElement("button");
btn.innerHTML = "Animate";
btn.addEventListener("click", () => {
    animate(0, 0);
});

document.body.appendChild(btn);
